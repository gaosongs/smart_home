# 接口设计

> 本项目采用传统的3层开发架构，分别为controller层、service层、dao层(mapper层)。
>
> 1. 其中controller层为控制层，主要作用是当用户接受客户端请求时，进行一些基础参数校验，如是否为空校验、手机号格式校验、两次密码是否一致校验等。控制层另一个作用就是调用service层。
> 2. service层为业务逻辑层，主要作用是处理业务，并调用dao层拿到数据，返回给controller层，最后返回给客户端（用户）。
> 3. dao层（mapper层）为数据访问层，组要作用是与数据库交互，进行一些增删改查操作。



> 本项目对接口的公共报文进行了统一的处理，分别为公共请求报文、公共返回报文，具体报文信息如下.
>
> 1. 公共请求报文（统一放在header头部）
>
>    | 参数名        | 必需 | 类型   | 字节长度 | 说明                                           |
>    | ------------- | ---- | ------ | -------- | ---------------------------------------------- |
>    | token         | 否   | string | 32       | 用户令牌，用户登陆后的唯一身份标识，登录后必传 |
>    | requestId     | 否   | string | 32       | 请求流水号，会在公共返回报文带出               |
>    | timestamp     | 否   | long   | 13       | 请求时间戳                                     |
>    | deviceId      | 否   | string | 500      | 设备号                                         |
>    | clientVersion | 否   | string | 100      | 客户端编号                                     |
>
>    - 请求示例如下：
>
>      {
>
>      ​	“token”:   "adfc9ba3211161e20190915221015",
>
>      ​	"requestId":  "d9b714de630692720190922133016",
>
>      ​	"timestamp":  "1567301655000",
>
>      ​	"deviceId":  "iPhone 8 plus",
>
>      ​	"clientVersion":  "1.0.0"
>
>      }
>
> 2. 返回公共报文如表
>
>    | 参数名    | 必需 | 类型   | 字节长度 | 说明             |
>    | --------- | ---- | ------ | -------- | ---------------- |
>    | code      | 是   | int    | 6        | 返回状态码       |
>    | message   | 是   | string | 500      | 返回消息         |
>    | result    | 是   | string | 2000     | 返回数据         |
>    | requestId | 是   | string | 32       | 请求报文的流水号 |
>    | timestamp | 是   | long   | 13       | 当前的时间戳     |
>
>    - 返回示例如下：
>
>      {
>
>      ​	“code”:  0,
>
>      ​	"message":  "success",
>
>      ​	"result":  null,
>
>      ​	"requestId":  "",
>
>      ​	"timestamp":  1567301655000 
>
>      }
>
>    - code返回值说明
>
>      | code返回值 | 说明     |
>      | ---------- | -------- |
>      | 0          | 成功     |
>      | -1         | 失败     |
>      | -2         | 参数异常 |
>      | 999        | 令牌失效 |



